<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=yes;" />

    <title>Making gifs with Go</title>

    <link href='http://fonts.googleapis.com/css?family=Comfortaa:300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800,300' rel='stylesheet' type='text/css'>

    <script>
      window.addEventListener("load",function() {
        setTimeout(function(){
          window.scrollTo(0, 0);
        }, 0);
      });
    </script>

    <link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css">
  </head>

  <body id='body' class="blog blog_2013-08-03-GoGifs blog_2013-08-03-GoGifs_index">

    <a href='/' class='jpoz '>JPoz</a>
    <a href='/photos' class='jpoz_photos inactive'>&nbsp;</a>
    <div class='contacts '>
      <a target='_blank' href='http://github.com/jpoz' class='contact github'>&nbsp;</a>
      <a target='_blank' href='http://twitter.com/jpoz' class='contact twitter'>&nbsp;</a>
      <a target='_blank' href='http://instagram.com/jpoz' class='contact instagram'>&nbsp;</a>  
    </div>

    <div id='content'>
        <div class='blog'>
    <div class='header'>
      <h1>Making gifs with Go</h1>
      <h4>Aug  3 2013</h4>
    </div>

    



    <article class='making_gifs_with_go'>
      <p>Go&#39;s standard library has a gif decoder, but sadly no encoder. I found an encode on github <a href="https://github.com/boppreh/gifencoder">here</a>. Unfortunalty it written in the <code>main</code> package so i forked it and pulled it into its own package: <a href="https://github.com/jpoz/gifencoder">github.com/jpoz/gifencoder</a>. Now we can easily decode a gif, play around with it and encode it back to a file.</p>

<p>For this example I&#39;m going to do something pretty basic: Take a gif and mirror the animation. Below is my target gif:</p>

<h2>nom.gif</h2>

<div style='text-align: center'>
  <img src='/images/nom.gif'/>
</div>

<p>Here&#39;s the code:</p>

<pre><code data-language="go">package main

import (
    "github.com/jpoz/gifencoder"
    "image/gif"
    "os"
)

func main() {
    file, _ := os.Open("nom.gif")
    g, _ := gif.DecodeAll(file)

    for _, img := range g.Image { // iterate over frames
        for x := 0; x < img.Bounds().Max.X/2; x++ { // half of the x space
            for y := 0; y < img.Bounds().Max.Y; y++ { // all of the y space
                // find the mirror pixel's color
                c := img.At(img.Bounds().Max.X-x, img.Bounds().Max.Y-y)
                // set it
                img.Set(x, y, c)
            }
        }
    }

    file, _ = os.Create("new_nom.gif")
    _ = gifencoder.EncodeAll(file, g)
}
</code></pre>

<p>Here&#39;s what we get:</p>

<h2>new_nom.gif</h2>

<div style='text-align: center'>
  <img src='/images/new_nom.gif'/>
</div>

    </article>

    <footer>
      Comments? <a href='http://twitter.com/jpoz'>@jpoz</a> on twitter!
    </footer>

  </div>


    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3441225-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=436051099836208";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  </body>
</html>
